---
import Img from './Img.astro';
import { PictireProps, mapSources, adaptBaseImageUrl } from '../components_shared';

export interface Props extends PictireProps {};
const { src, alt, classlist, lazy, sizes, formats, draggable, adaptiveModes } = Astro.props;

const sources = mapSources(src, formats, adaptiveModes);
---

<picture class={classlist} data-maddsua-component="astro:ssgassets:picture">
	{ sources.map(item => (
		<source srcset={item.source} type={item.type} media={item.media} />
	)) }
	<Img src={adaptBaseImageUrl(src)} alt={alt} draggable={draggable} lazy={lazy} sizes={sizes} />
</picture>
